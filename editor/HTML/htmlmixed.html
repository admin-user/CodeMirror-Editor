<!doctype html>
<html>
<head> 
<title>CodeMirror: HTML Mixed Mode</title>
<script src="http://admin-user.github.io/CodeMirror-Editor/mode/code/css/css.js"></script>
<script src="http://admin-user.github.io/CodeMirror-Editor/mode/code/html/htmlmixed.js"></script>
<script src="http://admin-user.github.io/CodeMirror-Editor/mode/code/javascript/javascript.js"></script>
<script src="http://admin-user.github.io/CodeMirror-Editor/mode/code/vbscript/vbscript.js"></script>
<script src="http://admin-user.github.io/CodeMirror-Editor/mode/code/xml/xml.js"></script>
</head>
<body> 
<script src="http://admin-user.github.io/CodeMirror-Editor/addon/selection/selection-pointer.js"></script>  

<textarea id="code" name="code" style="display: none;">&lt;html style="color: green"&gt;
  &lt;!-- this is a comment --&gt;
  &lt;head&gt;
    &lt;title&gt;Mixed HTML Example&lt;/title&gt;
    &lt;style type="text/css"&gt;
      h1 {font-family: comic sans; color: #f0f;}
      div {background: yellow !important;}
      body {
        max-width: 50em;
        margin: 1em 2em 1em 5em;
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Mixed HTML Example&lt;/h1&gt;
    &lt;script&gt;
      function jsFunc(arg1, arg2) {
        if (arg1 &amp;&amp; arg2) document.body.innerHTML = "achoo";
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</textarea>

<script>
      // Define an extended mixed-mode that understands vbscript and
      // leaves mustache/handlebars embedded templates in html mode
      var mixedMode = {
        name: "htmlmixed",
        scriptTypes: [{matches: /\/x-handlebars-template|\/x-mustache/i,
                       mode: null},
                      {matches: /(text|application)\/(x-)?vb(a|script)/i,
                       mode: "vbscript"}]
      };
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        mode: mixedMode,
        selectionPointer: true
      });
    </script>
</body>
</html>
